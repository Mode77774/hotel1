(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54872d12"],{"01d8":function(t,e,s){},"500d":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"top-bar"},[!t.logoState&&t.noticeList.length>0?e("notice-bar",{attrs:{"notice-list":t.noticeList,"logo-state":t.logoState}}):t._e(),e("kyc-alert")],1)},r=[],i=function(){var t=this,e=t._self._c;return t.showKycAlert&&t.status?e("div",{staticClass:"kyc-alert"},[e("div",{staticClass:"alert-inner",class:[t.status]},[e("div",{staticClass:"fl",on:{click:t.goKycStatus}},["waiting"===t.status?[e("span",{staticClass:"text"},[t._v(" "+t._s(t.$t("kycAlert.waiting_msg"))+" ")]),e("span",{staticClass:"time"},[t._v(t._s(t.timeFormat))])]:"succeeded"===t.status?[e("span",{staticClass:"text"},[t._v(t._s(t.$t("kycAlert.success_msg")))])]:"failed"===t.status?[e("span",{staticClass:"text cursor-pointer"},[t._v(" "+t._s(t.$t("kycAlert.failure_msg"))+" ")])]:t._e()],2),e("div",{staticClass:"fr"},[e("img",{attrs:{src:s("063d"),alt:""},on:{click:t.onCloseKycAlert}})])])]):t._e()},c=[],l=(s("14d9"),s("3591")),n={name:"KycAlert",data(){return{showKycAlert:!1,waitingTime:0,timer:null,kycInfo:{},getKycStatusTimer:null}},computed:{timeFormat(){let t=this.waitingTime,e=String(parseInt(t/60/60)).padStart(2,0),s=String(parseInt(t/60%60)).padStart(2,0),a=String(t%60).padStart(2,0);return t<3600?`${s}:${a}`:`${e}:${s}:${a}`},status(){let t="";const{userLevel:e,kycFlag:s,currKycStatus:a}=this.kycInfo;switch(!0){case 1==e&&2==s&&(4==a||5==a):t="waiting";break;case 1==e&&2==s&&3==a:t="failed";break}return t}},mounted(){},beforeDestroy(){clearInterval(this.timer),clearInterval(this.getKycStatusTimer)},watch:{$route:{immediate:!0,deep:!0,handler(t){"/index"===t.path&&localStorage.getItem("token")&&localStorage.getItem("email")&&"true"!==localStorage.getItem("kycAlertClosed")?(this.showKycAlert=!0,this.init(),clearInterval(this.getKycStatusTimer),this.getKycStatusTimer=setInterval(()=>{this.init()},5e3)):(clearInterval(this.timer),clearInterval(this.getKycStatusTimer),this.showKycAlert=!1)}}},methods:{async init(){let t=await Object(l["k"])();if(2==t)return clearInterval(this.timer),void clearInterval(this.getKycStatusTimer);await this.getKycStatus().then(t=>{this.kycInfo=t,this.waitingTime=parseInt((this.kycInfo.currTime-this.kycInfo.kycStartTime)/1e3),clearInterval(this.timer),this.timer=setInterval(()=>{this.waitingTime++},1e3),(2!=this.kycInfo.kycFlag||4!=this.kycInfo.currKycStatus&&5!=this.kycInfo.currKycStatus||1!=this.kycInfo.userLevel)&&(clearInterval(this.timer),clearInterval(this.getKycStatusTimer))}).catch(t=>{clearInterval(this.timer),clearInterval(this.getKycStatusTimer),console.error(t)})},getKycStatus(){return new Promise((t,e)=>{Object(l["e"])("","").then(e=>{localStorage.setItem("kyc_user_detail",JSON.stringify(e)),t(e)}).catch(t=>{console.error(t),e("get key status error")})})},goKycStatus(){this.$router.push({path:"/kycStatus"})},onCloseKycAlert(){localStorage.setItem("kycAlertClosed","true"),this.showKycAlert=!1}}},o=n,u=(s("701b"),s("2877")),h=Object(u["a"])(o,i,c,!1,null,"6a5c44c5",null),y=h.exports,m={name:"TopBar",props:["noticeList","logoState"],components:{KycAlert:y},data(){return{}},computed:{},mounted(){},beforeDestroy(){},watch:{},methods:{}},g=m,d=(s("a98a"),Object(u["a"])(g,a,r,!1,null,"fcfbf420",null));e["default"]=d.exports},"701b":function(t,e,s){"use strict";s("fa2d")},a98a:function(t,e,s){"use strict";s("01d8")},fa2d:function(t,e,s){}}]);
//# sourceMappingURL=chunk-54872d12.1702633336083.js.map